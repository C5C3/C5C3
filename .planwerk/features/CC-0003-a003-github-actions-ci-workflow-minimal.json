{
  "feature_id": "CC-0003",
  "title": "A003: GitHub Actions CI Workflow (Minimal)",
  "slug": "a003-github-actions-ci-workflow-minimal",
  "status": "proposed",
  "phase": null,
  "summary": "",
  "description": "**Size:** ðŸ”§ small\n**Category:** infrastructure\n**Priority:** medium\n\n## Summary\n\nCreate a GitHub Actions CI workflow (`.github/workflows/ci.yaml`) that runs three parallel jobs â€” `lint`, `test`, and `test-integration` â€” on every PR and push to `main`. The workflow uses Go workspace mode via `go.work`, includes concurrency control to cancel superseded runs, and depends on the Makefile and Go workspace scaffolded by CC-0001.\n\n## Scope\n\n**Included:**\n- `.github/workflows/ci.yaml` with triggers on `push` to `main` and `pull_request`\n- `lint` job using `golangci/golangci-lint-action` against the Go workspace root\n- `test` job running `make test` (unit tests)\n- `test-integration` job running `make test-integration` (envtest-based integration tests)\n- `actions/setup-go` with Go version read from `go.mod` and module caching\n- SPDX license header (matching existing `reuse.yaml` / `deploy-docs.yaml` conventions)\n- `permissions: contents: read` (least privilege, matching `reuse.yaml`)\n- Concurrency group `${{ github.ref }}-${{ github.workflow }}` with `cancel-in-progress: true` (matching `mega-linter.yml` pattern)\n\n**Excluded (with rationale):**\n- Container image builds â€” CC-0007, separate workflow\n- Helm chart packaging/push â€” S017/S018, YAGNI until charts exist\n- E2E/Chainsaw tests â€” S018, requires kind cluster setup, not part of minimal CI\n- Code coverage reporting/thresholds â€” S018, YAGNI for the minimal CI gate\n- Branch protection rule configuration â€” repo setting, not a workflow file\n- Matrix builds per operator module â€” Makefile abstracts this via `OPERATORS` variable; Go workspace mode with `go.work` provides single cache/download\n\n## Visualization\n\n```mermaid\nflowchart TD\n    trigger[\"Push to main / PR\"]\n\n    trigger --> lint\n    trigger --> test\n    trigger --> integ\n\n    subgraph lint[\"lint\"]\n        L1[\"actions/checkout@v4\"] --> L2[\"actions/setup-go\"]\n        L2 --> L3[\"golangci-lint-action\"]\n    end\n\n    subgraph test[\"test\"]\n        T1[\"actions/checkout@v4\"] --> T2[\"actions/setup-go\"]\n        T2 --> T3[\"make test\"]\n    end\n\n    subgraph integ[\"test-integration\"]\n        I1[\"actions/checkout@v4\"] --> I2[\"actions/setup-go\"]\n        I2 --> I3[\"make test-integration\"]\n    end\n\n    lint --> merge[\"PR Merge Gate\"]\n    test --> merge\n    integ --> merge\n```\n\n```mermaid\nsequenceDiagram\n    participant Dev as Developer\n    participant GH as GitHub\n    participant CI as CI Workflow\n    participant Lint as lint job\n    participant Test as test job\n    participant Integ as test-integration job\n\n    Dev->>GH: Push / Open PR\n    GH->>CI: Trigger ci.yaml\n    par All jobs run in parallel\n        CI->>Lint: golangci-lint-action\n        CI->>Test: make test\n        CI->>Integ: make test-integration\n    end\n    Lint-->>CI: pass/fail\n    Test-->>CI: pass/fail\n    Integ-->>CI: pass/fail\n    CI-->>GH: All checks status\n    GH-->>Dev: PR status update\n```\n\n## Key Components\n\n- **`.github/workflows/ci.yaml`** â€” Single workflow file with 3 parallel jobs. Follows existing conventions: SPDX header (`Copyright 2026 SAP SE or an SAP affiliate company`), `\"on\"` quoting, `ubuntu-latest`, `permissions: contents: read`. Uses `.yaml` extension matching `reuse.yaml` and `deploy-docs.yaml`\n- **`lint` job** â€” Uses `golangci/golangci-lint-action` (handles installation, caching, version pinning); targets the Go workspace root. No separate `actions/setup-go` needed â€” the action handles Go setup internally\n- **`test` job** â€” `actions/setup-go` with `go-version-file: go.mod` + module caching, then `make test`. Relies on CC-0001 Makefile iterating over `OPERATORS`\n- **`test-integration` job** â€” Same Go setup as `test`, then `make test-integration`. May require envtest binaries â€” depends on whether CC-0001's Makefile handles `setup-envtest` download within the target or needs a separate `make install-test-deps` step first\n- **Concurrency group** â€” `${{ github.ref }}-${{ github.workflow }}` with `cancel-in-progress: true`, mirroring `mega-linter.yml:32-34`\n- **Dependency** â€” Hard dependency on CC-0001 (Go workspace, Makefile targets, `.golangci.yml`) and CC-0002 (test infrastructure for `test-integration` to be meaningful)",
  "stories": [],
  "requirements": [],
  "tasks": [],
  "test_specifications": [],
  "affected_files": [],
  "similar_patterns": [],
  "review_criteria": [],
  "implementation_notes": "",
  "status_history": {
    "draft": {
      "github_account": "berendt",
      "timestamp": "2026-02-22T20:42:36.262375"
    },
    "elaborated": {
      "github_account": "berendt",
      "timestamp": "2026-02-22T21:08:51.591211"
    }
  },
  "origin": "plan",
  "devils_advocate_report": {
    "verdict": "RECONSIDER",
    "summary": "Failed to parse challenge report: no XML found in output",
    "challenges": [],
    "risk_flags": [],
    "alternatives": []
  }
}
